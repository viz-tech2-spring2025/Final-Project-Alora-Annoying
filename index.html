<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Untitled Project</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

</head>

<body>
  <div class="sections-container">
    <section class="main-section" id="section1">
      <div class="content">
        <h2>The Slient Shift:</h2>
        <h1>How Extreme Weather is Reshaping Ecosystems</h1>
        <p class="ampersand">&</p>
        <h1>How Species are Reacting</h1>
        <!-- <br><br><br><br><br>
        <div class="scroll-down-icon">
          <img style="width: 40px" src="./pic/Arrow-down-circle.png" alt="Scroll Down" />
        </div> -->
      </div>
    </section>

    <section class="second-section" id="section2">
      <div class="center-text section2-text">
        <h2>The Growing Footprint of Extreme Weather</h2>
        <p>
          In recent decades, extreme weather events have become increasingly frequent, affecting regions across the
          globe. Before we explore how ecosystems are adapting (or failing to adapt), we must first understand the scale
          of the disruption from human’s perspective.
        </p>
      </div>
    </section>

    <section class="third-section" id="section3">
      <div class="content-container">
        <div class="text-section">
          <h2>Financial Damage (2001-2025)</h2>
          <p>
            Extreme weather in the 21st century has caused unprecedented economic losses to human society with about
            <strong>$ 6,522,664,126,000</strong> financial damage.
          </p>
        </div>
        <div class="image-section">
          <img src="/pic/Global Damage (all time)  1.png" alt="Global Financial Impact" class="global-image" />
          <!-- <div class="hover-text">
            Hover to check the amount
            <div class="hover-popup">$ 6,522,664,126,000</div>
          </div> -->
        </div>
      </div>
    </section>

    <section class="fourth-section" id="section4">
      <div class="animal-layer"></div>
      <div class="content-container">
        <div class="center-text">
          <h2>
            We can quantify economic losses in dollars, but how do we measure the losses in nature?
          </h2>
          <br>
          <p>
            Nature is in flux, and not in the way it should be. The rhythm of life—when animals migrate, when plants
            bloom, when food sources are available—is changing in unpredictable ways. Extreme weather events, from
            heatwaves to hurricanes, are forcing ecosystems to adapt in real-time.
          </p>
        </div>
      </div>
    </section>

    <section class="fifth-section" id="section5">
      <div class="left-content">
        <h2>
          An Overlooked Crisis: How Scientists Are Trying to Keep Up
        </h2>
        <br />
        <p>
          Recognizing this blind spot, a group of researchers systematically reviewed over 300 studies on how EWEs
          affect wildlife and plants. Their work spans 2001 to 2017, revealing a growing awareness of these ecosystem
          impacts.The number of articles recorded over the years is presented.
        </p>
      </div>
      <div class="right-content">
        <h3 style="min-width: 100%">
          The number of articles recorded (2001 - 2017)
        </h3>
        <div class="indicator">
          <div class="circle"></div>
          <span>= 1 reported EWE that impact ecosystem</span>
        </div>
        <img src="/pic/Frame 46.png" alt="Disaster statistics" class="frame-img" />
        <p>
          Overall, the increasing number of ecosystem impacts of extreme weather events being surveyed is partly a sign
          of the growing attention of scholars in this issue, but it does not diminish the ecosystem impacts caused by
          extreme weather events.
        </p>
      </div>
    </section>

    <section class="fifth-section" id="section5-2">
      <div class="left-content">
        <h2>
          Resilience: How Species Respond to Natural Disasters
        </h2>
        <br />
        <p>
          However, not all species succumb to extreme weather in the same way. Some have evolved survival strategies
          that help them withstand or even thrive in the face of disasters. This is where compensation types—mechanisms
          of resilience—come into play.
        </p>
      </div>
      <div class="right-content">
        <!-- <h3 style="min-width: 100%">Statistics Overview</h3> -->
        <div class="box-container">
          <div class="square-box" data-id="box1">
            <h2>Behaviour</h2>
            <p>Species can adjust their behavior to cope with environmental changes.</p>
          </div>
          <div class="square-box" data-id="box2">
            <h2>Demographical</h2>
            <p>Involves changes in population dynamics to offset losses.</p>
          </div>
          <div class="square-box" data-id="box3">
            <h2>Physiological</h2>
            <p>E.g., reduce energy expenditure, alter body size, plants develop their leaves, etc.</p>
          </div>
          <div class="long-box" id="info-display">
            <div class="info-image" style="flex: 1; padding-right: 20px; height: 220px">
              <!-- 图片将通过JS动态插入 -->
            </div>
            <div class="info-text" style="flex: 2"></div>
            <p class="info-hint">
              Choose the compensation to see example
            </p>
          </div>
        </div>
      </div>
    </section>

    <section class="sixth-section" id="section6">
      <div class="left-content">
        <p>
          Under the influence of these extreme weather events, species and plant life closely linked to human well-being
          have also been significantly affected. These disruptions not only threaten biodiversity but may also have
          cascading effects on ecosystems and the resources humans depend on.
        </p>
      </div>
      <div class="right-content">
        <div id="viz"></div>
      </div>
    </section>

  </div>

  <div class="section-indicator">
    <div class="dot active" data-section="section1"></div>
    <div class="dot" data-section="section2"></div>
    <div class="dot" data-section="section3"></div>
    <div class="dot" data-section="section4"></div>
    <div class="dot" data-section="section5"></div>
    <div class="dot" data-section="section6"></div>
    <div class="dot" data-section="section7"></div>
    <div class="dot" data-section="section8"></div>
    <div class="dot" data-section="section9"></div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const sectionsContainer = document.querySelector('.sections-container')
      const dots = document.querySelectorAll('.dot')
      let currentSection = 0
      let isScrolling = false
      const sections = document.querySelectorAll('section')

      // add dots clickable? (want to try)
      dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
          scrollToSection(index)
        })
      })

      // wheel event
      window.addEventListener('wheel', e => {
        if (isScrolling) return

        isScrolling = true
        setTimeout(() => {
          isScrolling = false
        }, 1000)

        if (e.deltaY > 0 && currentSection < sections.length - 1) {
          // scroll downtowards
          scrollToSection(currentSection + 1)
        } else if (e.deltaY < 0 && currentSection > 0) {
          // scroll uptowards
          scrollToSection(currentSection - 1)
        }
      })

      // touch event
      let touchStartY = 0
      window.addEventListener('touchstart', e => {
        touchStartY = e.touches[0].clientY
      })

      window.addEventListener('touchend', e => {
        if (isScrolling) return

        const touchEndY = e.changedTouches[0].clientY
        const diff = touchStartY - touchEndY

        isScrolling = true
        setTimeout(() => {
          isScrolling = false
        }, 1000)

        if (diff > 50 && currentSection < sections.length - 1) {
          // scroll downtowards
          scrollToSection(currentSection + 1)
        } else if (diff < -50 && currentSection > 0) {
          // scroll uptowards
          scrollToSection(currentSection - 1)
        }
      })

      function scrollToSection(index) {
        currentSection = index
        sections[index].scrollIntoView({ behavior: 'smooth' })

        // update indicator dot
        dots.forEach((dot, i) => {
          if (i === index) {
            dot.classList.add('active')
          } else {
            dot.classList.remove('active')
          }
        })
      }

      // 方块悬停交互功能
      const squareBoxes = document.querySelectorAll('.square-box')
      const infoDisplay = document.getElementById('info-display')
      const infoImage = document.querySelector('.info-image')
      const infoText = document.querySelector('.info-text')

      // Example Box Content
      const boxContents = {
        box1: {
          image: '/pic/image 27.png',
          text: 'Animal loss refers to the decline in animal populations due to human activities. This includes extinction of species and reduction in population numbers, which can disrupt ecosystems and food chains.'
        },
        box2: {
          image: '/pic/image 27.png',
          text: 'Habitat loss occurs when natural environments are destroyed or altered, making them unsuitable for the species that depend on them. This is primarily caused by deforestation, urbanization, and agriculture expansion.'
        },
        box3: {
          image: '/pic/image 27.png',
          text: 'Biodiversity loss refers to the reduction in variety of living species in an ecosystem. This decreases ecosystem resilience and impacts ecosystem services that humans rely on, including clean air, water, and food security.'
        }
      }

      // 为每个方块添加鼠标悬停事件
      squareBoxes.forEach(box => {
        box.addEventListener('click', function () {
          const boxId = this.getAttribute('data-id')
          const content = boxContents[boxId]
          const infoHint = document.querySelector('.info-hint')
          infoHint.style.display = 'none' // 隐藏提示文本
          // 更新长方形区域的内容
          infoImage.innerHTML = `<img src="${content.image}" alt="${boxId} example">`
          infoText.innerHTML = `<p style="font-size:12px;">${content.text}</p>` // 设置字体大小为16px

          // 添加激活状态
          infoDisplay.classList.add('active')
          this.classList.add('active-box')
        })
      })
    })
  </script>

  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="./script-viz.js"></script>
</body>

</html>